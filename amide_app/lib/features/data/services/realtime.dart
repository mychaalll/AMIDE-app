import 'dart:async';

import 'package:amide_app/features/data/models/reminder/music.dart';
import 'package:firebase_database/firebase_database.dart';

class Realtime {
  final DatabaseReference alarm_db = FirebaseDatabase.instance.ref("alarms");

  Future<void> createData(Music music) async {
    String? autoGeneratedId = alarm_db.push().key;

    final int id = int.parse(music.id!.replaceAll("-", "").substring(0, 4), radix: 16);

    await alarm_db.child(autoGeneratedId!).remove().then(
          (value) => alarm_db.child("$id").set(music.toJson()),
        );
  }

  Future<void> editData(Music music) async {
    final int id = int.parse(music.id!.replaceAll("-", "").substring(0, 4), radix: 16);
    await alarm_db.child("$id").update(music.toJson());
  }

  Future<void> deleteData(Music music) async {
    await alarm_db.child(music.id!).remove();
  }

  final DatabaseReference vital_db = FirebaseDatabase.instance.ref("vitals");

  Future<void> recordData() async {
    await vital_db.update({
      "heartRate": -1,
      "height": -1,
      "weight": -1,
      "oxygenRate": -1,
      "temperature": -1,
    });
  }

  // Future<dynamic> sendData() async {
  //    vital_db.once().then((DataSnapshot snapshot) {
  //         if (snapshot.value != null) {
  //           print(snapshot.value);
  //         }
  //       };
  // }
}
